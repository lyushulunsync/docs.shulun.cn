# 图解 HTTP (读书笔记)
> 作者: 上野宣
> 翻译: 于均良
> ISBN: 978-7-115-35153-1

## 第一章
> 目的: 
> 1. 了解 Web 及网络基础概念.
> 2. 了解 Web 三项核心技术: HTML, URL 和 HTTP.
> 3. 了解 HTTP 历史.
> 4. 了解其他相关协议.

Web 三项核心技术的各自目的:
- HTML: 呈现 Web 内容.
- URL: 定位 Web 内容.
- HTTP: 客户端发送请求, 服务器端响应请求并返回指定 URL 地址内容的载体.

## 第二章
> 目的:
> 1. 了解 "客户端请求-服务端响应" 全流程.
> 2. 了解 HTTP 报文生命周期.

## 第三章
> 目的:
> 1. 掌握 HTTP 完整报文的格式.

## 第四章
> 目的:
> 1. 掌握 HTTP 状态码

HTTP 状态码:
- 2xx: 成功相关
- 3xx: 重定向相关
- 4xx: 客户端请求错误相关
- 5xx: 服务端内部错误相关

## 第五章
> 目的:
> 1. 掌握 Web 应用服务器代理, 网管, 隧道, 缓存机制.

## 第六章
> 目的:
> 1. 掌握 HTTP 头中常见字段.

## 第七章
> 目的:
> 1. 掌握 HTTPS.

HTTP 是明文传输协议, 为了加密传输, 可以通过:
1. 在业务代码中, 对数据加密;
2. 使用 HTTPS.

HTTPS 是 HTTP 基于 SSL 实现的加密传输协议, 目的是:
1. 证明谁是谁.
2. 加密传输数据.

## 第八章
> 目的:
> 1. 掌握基础认证 (basic authentication), 摘要认证 (digest authentication) 和 基于表单的认证 (form-based authentication).
> 2. 了解 Windows NTLM 认证, keberos 认证.

HTTP 是无状态协议, 涉及需要状态的场景, 如登陆状态, 通常做法是客户端保存 Cookie, 服务端保存 Session (会话), 以体现用户的各类状态.

早期使用基础认证 (basic authentication), 摘要认证 (digest authentication), 现在基本不再使用了. 目前主要使用: 基于表单的认证 (form-based authentication).

另外, 应该了解 Windows NTLM 认证, keberos 认证.

## 第九章
> 目的:
> 1. 掌握基于 HTTP/HTTPS 实现的拓展技术: Ajax (页面局部刷新), WebSocket (全双工通信), WebDAV (多人在线协同文档编辑).

HTTP 设计于 1996 年, 已经无法满足当前很多业务需求. 基于 HTTP/HTTPS 实现的技术应运而生:
- Ajax (实现局部页面刷新), 用于解决: 页面部分内容信息更新了, 但不得不重新获取整个页面, 导致传输大量无效数据.
- WebSocket (实现全双工通信), 用于解决: HTTP 是 "客户端请求-服务端应答" 单向联系, 若要了解服务端是否有数据更新, 只能在客户端轮询发送请求 (polling), 效率低下.
- WebDAV (实现多人在线协同文档编辑).

## 第十章
> 目的:
> 1. 掌握前端技术栈: HTML, CSS 和 JavaScript.
> 2. 熟练前端技术栈: DOM.
> 3. 了解后端技术栈: PHP, JSP, ASP, Python, JavaScript (Node.js)
> 4. 掌握数据交互技术: XML, RSS/atom, JSON.

## 第十一章
> 目的:
> 1. 了解 Web 系统出现安全问题的常见原因.
> 2. 掌握解决几种常见的注入攻击方式的解决方案.
> 3. 掌握解决m几种常见的设计缺陷解决方案.
> 4. 掌握解决几种常见的会话攻击手段的解决方案.
> 5. 了解其他常见的攻击手段.

Web 系统出现安全问题的常见原因:
1. HTTP 设计之初, 只是为了传输文本信息, 并包含加密, 认证等安全机制. 现有的 Web 加密, 认证均是在 HTTP 规范之外拓展实现的, 难免存在漏洞.
2. HTTP 传输过程中, 对所有用户都是可见, 甚至是可篡改的, 这就造成服务端接收的所有数据都是不可信的, 这极大增加了安全机制防御的难度.
3. 从业人员设计的 Web 应用质量层次不齐.

几种常见的注入攻击:在系统生成的原始信息中, 加入虚假构造的恶意信息, 以达到扰乱服务端正常处理业务的目的.
1. 恶意数据注入
2. XSS
3. iSQL
4. OS 命令注入
5. 邮件头注入
6. 目录遍历
7. 远程文件包含

服务端应该对任何的输入都进行安全性校验. 所有的输入数据都是不可信的, 因此在客户端和服务端都要执行有效性校验.
- 客户端执行, 是为了提升用户体验 (手机号字段填入了非数字, 如果没有客户端校验, 要么要等到服务端校验之后才能返回错误提示, 耗时太长; 同时, 该业务如果包含其他字段, 又得全部重填).
- 服务端执行, 是为了增强安全性.

几种常见的设计缺陷:
1. 文件名可猜测, 如以日期命名的日志文件 `https://sub.website.com/20051009.log`
2. 系统输出有价值的报错信息, 如登陆错误, 提示账号不存在. 造成攻击者基于此, 测出大量有效账号.
3. 开放重定向. 某些网站允许重定向至站外链接, 导致攻击者可以讲恶意网址混入到正规网站 URL 中, 达成欺骗用户的目的.

几种常见的会话攻击: Web 系统认证通常保存在 Session (会话) 中, 若能攻破会话系统, 那么可以挪用任意用户身份登陆, 甚至无需登录, 就能访问 Web 资源.
1. 盗用已登陆用户的 Cookie.
2. 让其他用户基于恶意用户会话系统进行 ID 登陆.
3. 借助已登陆用户的状态执行不知情操作 (CSRF, 跨站请求伪造).

其他常见的攻击手段:
1. 密码攻击. 安全意识薄弱的用户, 为了方便记忆密码, 通常设计的密码有 3 个特点: 
  - 复杂度低 (键盘序列 q1w2e3r4, test1234): 暴力破解
  - 与个人信息相关 (生日 19901010, 房号 b1505): 社工
  - 所有网站共用相同账号和密码 (淘宝/微信): 撞库
2. 点击劫持. 在正常页面上放置一个透明的恶意页面, 用户以为点击的是正常页面, 其实点击到的是恶意网站.
3. 拒绝服务攻击. 通过让服务端资源耗尽或服务锁定, 造成网站停止服务.

